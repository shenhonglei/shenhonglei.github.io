<!doctype html><html lang=zh-zh><head><meta charset=utf-8><title>SELinux|Disabled、Permissive、Enforcing</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=description content="SELinux，Security Enhanced Linux 的缩写，也就是安全强化的 Linux，是由美国国家安全局（NSA）联合其他安全机构（比如 SCC 公司）共同开发的，旨在增强传统 Linux 操作系统的安全性，解决传统 Linux 系统中自主访问控制（DAC）系统中的各种权限问题（如 root 权限过高等）"><meta name=author content="shenhonglei"><meta name=generator content="Hugo 0.74.3"><link rel=stylesheet href=https://shenhonglei.com/plugins/bootstrap/bootstrap.min.css><link rel=stylesheet href=https://shenhonglei.com/plugins/Ionicons/css/ionicons.min.css><link rel=stylesheet href=https://shenhonglei.com/plugins/magnific-popup/magnific-popup.css><link rel=stylesheet href=https://shenhonglei.com/plugins/slick/slick.css><link rel=stylesheet href=https://shenhonglei.com/scss/style.min.css media=screen><link rel="shortcut icon" href=https://shenhonglei.com/images/favicon.png type=image/x-icon><link rel=icon href=https://shenhonglei.com/images/favicon.png type=image/x-icon></head><body><div class=preloader></div><header class=navigation><div class=container><div class=row><div class=col-md-12><nav class=navbar><div class=navbar-header><button type=button class="navbar-toggle collapsed" data-toggle=collapse data-target=#navigation>
<span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button>
<a class=navbar-brand href=/><img src=https://shenhonglei.com/images/logo.png alt="Honglei | Honglei's Blog" width=150px class=img-responsive></a></div><div class="collapse navbar-collapse" id=navigation><ul class="nav navbar-nav navbar-right"><li><a href=/>首页</a></li><li><a href=/blog>博客</a></li><li><a href=/csdn>CSDN</a></li><li><a href=/about>关于</a></li></ul></div></nav></div></div></div></header><section class="page-title bg-2" style=background-image:url(https://shenhonglei.com/images/featue-bg.jpg)><div class=container><div class=row><div class=col-md-12><div class=block><h1>SELinux|Disabled、Permissive、Enforcing</h1><p>SELinux，Security Enhanced Linux 的缩写，也就是安全强化的 Linux，是由美国国家安全局（NSA）联合其他安全机构（比如 SCC 公司）共同开发的，旨在增强传统 Linux 操作系统的安全性，解决传统 Linux 系统中自主访问控制（DAC）系统中的各种权限问题（如 root 权限过高等）</p></div></div></div></div></section><section class=page-wrapper><div class=container><div class=row><div class=col-md-8><div class="post post-single"><h2 class=post-title>SELinux|Disabled、Permissive、Enforcing</h2><div class=post-meta><ul><li><i class=ion-calendar></i>December 14, 2020</li><li><i class=ion-android-people></i>作者
<a class=text-primary href=/author/honglei>honglei</a></li><li><i class=ion-pricetags></i><a href=/tags/selinux>S e linux</a></li></ul></div><div class=post-thumb><img class=img-responsive src=/images/csdn/csdn-selinux.png alt=SELinux|Disabled、Permissive、Enforcing></div><div class="post-content post-excerpt"><h1 id=selinux是什么>SELinux是什么</h1><p>SELinux，Security Enhanced Linux 的缩写，也就是安全强化的 Linux，是由美国国家安全局（NSA）联合其他安全机构（比如 SCC 公司）共同开发的，旨在增强传统 Linux 操作系统的安全性，解决传统 Linux 系统中自主访问控制（DAC）系统中的各种权限问题（如 root 权限过高等）
<a href=http://selinuxproject.org/page/Main_Page>SELinux Wiki</a>
SELinux 项目在 2000 年以 GPL 协议的形式开源，Red Hat 在其 Linux 发行版本中包括了 SELinux，<em>(部署在 Linux 上用于增强系统安全的功能模块)</em> ，基本上所有的 Linux 内核 2.6 以上版本，都集成了 SELinux 功能。</p><h1 id=selinux的作用>SELinux的作用</h1><ul><li>传统的 Linux 系统中，默认权限是对文件或目录的所有者、所属组和其他人的读、写和执行权限进行控制，这种控制方式称为自主访问控制(DAC)方式</li><li>在 SELinux 中，采用的是强制访问控制(MAC)系统，即控制一个进程对具体文件系统上面的文件或目录是否拥有访问权限，而判断进程是否可以访问文件或目录的依据，取决于 SELinux 中设定的很多策略规则。</li></ul><blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>自主访问控制系统（Discretionary Access Control）
- Linux 的默认访问控制方式 
- 依据用户的身份和该身份对文件及目录的 rwx 权限来判断是否可以访问
- root权限不合理分配易导致严重后果
</code></pre></div><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>强制访问控制（Mandatory Access Control）
- 默认已经集成or安装SELinux 
- root 用户如果进程不对，也无法访问
- 进程是否可以访问文件或目录的依据，取决于 SELinux 中设定的很多策略规则
</code></pre></div></blockquote><h1 id=安装selinux>安装SELinux</h1><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>yum -y install setroubleshoot
yum -y install setools-console
</code></pre></div><h1 id=selinux-3种工作模式>SELinux 3种工作模式</h1><h2 id=disable关闭工作模式>Disable[关闭]工作模式</h2><p>如果SELinux 被关闭(开启Disable 模式),就使用传统的 Linux 系统默认的自主访问控制(DAC)方式，不需要增强安全性的环境来说，该模式是很好用的。</p><p><strong>如何关闭呢：</strong>
sed -i &rsquo;s/SELINUX=enforcing/SELINUX=disabled/g&rsquo; /etc/selinux/config
编辑配置文件 /etc/selinux/config，把 SELINUX= 更改为 SELINUX=disabled ，然后重启系统，SELinux 就被禁用了。</p><h2 id=permissive宽容工作模式>Permissive[宽容]工作模式</h2><p>在 Permissive 模式中，安全策略规则并没有被强制执行。当安全策略规则应该拒绝访问时，访问仍然被允许。然而，此时会向日志文件发送一条消息，表示该访问应该被拒绝。</p><p>SELinux Permissive 模式主要用于以下几种情况：</p><ul><li>审核当前的 SELinux 策略规则；</li><li>测试新应用程序，看看将 SELinux 策略规则应用到这些程序时会有什么效果；</li><li>解决某一特定服务或应用程序在 SELinux 下不再正常工作的故障。</li></ul><h2 id=enforcing强制模式>Enforcing[强制]模式</h2><p>Enforcing 模式， SELinux 被启动，并强制执行所有的安全策略规则。</p><h1 id=selinux-3种工作模式切换>SELinux 3种工作模式切换</h1><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#查询SELinux的运行模式</span>
getenforce
</code></pre></div><h2 id=setenforce-切换模式>setenforce 切换模式</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#enforcing 和 permissive 两种模式之间进行切换</span>
setenforce <span style=color:#ae81ff>0</span> <span style=color:#75715e>#切换成宽容模式</span>
setenforce <span style=color:#ae81ff>1</span> <span style=color:#75715e>#切换成强制模式</span>
</code></pre></div><p>除可以查询 SELinux 的运行模式之外，也可以修改 SELinux 的运行模式，即使用 setenforce 命令。不过需要注意，setenforce 命令只能让 SELinux 在 enforcing 和 permissive 两种模式之间进行切换。如果从启动切换到关闭，或从关闭切换到启动，则只能修改配置文件，setenforce 命令就无能为力了。</p><h2 id=selinux-的运行模式的开启和关闭>SELinux 的运行模式的开启和关闭</h2><p>setenforce 命令只能切换enforcing 和 permissive 两种模式，如果启动和关闭的话需要修改配置文件。</p><p><strong>关闭 SELinux</strong>
sed -i &rsquo;s/SELINUX=enforcing/SELINUX=disabled/g&rsquo; /etc/selinux/config
编辑配置文件 /etc/selinux/config，把 SELINUX= 更改为 SELINUX=disabled ，然后重启系统，SELinux 就被禁用了。</p></div><div class=post-comments><div id=gitalk-container></div><link rel=stylesheet href=https://unpkg.com/gitalk/dist/gitalk.css><script src=https://unpkg.com/gitalk/dist/gitalk.min.js></script><script>const gitalk=new Gitalk({clientID:'e888637db32e8bd4431b',clientSecret:'1118f7d74f6dff42af59655e7cd32da20d3621e5',repo:'shenhonglei.github.io',owner:'shenhonglei',admin:['shenhonglei'],id:location.pathname,distractionFreeMode:false});(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('gitalk-container').innerHTML='Gitalk comments not available by default when the website is previewed locally.';return;}
gitalk.render('gitalk-container');})();</script></div></div></div><div class=col-md-4><aside class=sidebar><div class="widget widget-latest-post"><h4 class=widget-title>最新内容</h4><div class=media><a class=pull-left href=https://shenhonglei.com/csdn/cka-catalog/><img class=media-object src=/images/csdn/csdn-cka-catalog.png alt=cka-catalog></a><div class=media-body><h4 class=media-heading><a href=https://shenhonglei.com/csdn/cka-catalog/>cka-catalog</a></h4><p>新版本 CKA 裸考资源目录总览 感谢您选择 CKA 考试学习专栏。 本专栏是作者通过实践总结内容， …</p></div></div><div class=media><a class=pull-left href=https://shenhonglei.com/csdn/golang/><img class=media-object src=/images/csdn/csdn-gitalk.png alt=golang></a><div class=media-body><h4 class=media-heading><a href=https://shenhonglei.com/csdn/golang/>golang</a></h4><p>golang 语言基础 当前写go一些主流的微服务框架有哪些呢？
go-micro go-zero …</p></div></div><div class=media><a class=pull-left href=https://shenhonglei.com/csdn/cka/><img class=media-object src=/images/csdn/csdn-gitalk.png alt="cka 2020.12"></a><div class=media-body><h4 class=media-heading><a href=https://shenhonglei.com/csdn/cka/>cka 2020.12</a></h4><p>cka 2020.12 1 Create a new ClusterRole named …</p></div></div><div class=media><a class=pull-left href=https://shenhonglei.com/csdn/kubernetes-metrics-server/><img class=media-object src=/images/csdn/csdn-kubernetes-metrics-server.png alt="k8s 上部署 Metrics Server"></a><div class=media-body><h4 class=media-heading><a href=https://shenhonglei.com/csdn/kubernetes-metrics-server/>k8s 上部署 Metrics Server</a></h4><p>环境 Mac 系统里 docker-desktop上运行的 Kubernetes v1.19.3 上 …</p></div></div></div><div class="widget widget-category"><h4 class=widget-title>目录</h4><ul class=widget-category-list><li><a href=/categories/artificial-intelligence>Artificial intelligence</a></li><li><a href=/categories/company-news>Company news</a></li><li><a href=/categories/go>Go</a></li><li><a href=/categories/kubernetes>Kubernetes</a></li><li><a href=/categories/legacy-support>Legacy support</a></li><li><a href=/categories/linux>Linux</a></li><li><a href=/categories/tools>Tools</a></li></ul></div><div class="widget widget-tag"><h4 class=widget-title>标签</h4><ul class=widget-tag-list><li><a href=/tags/advice>Advice</a></li><li><a href=/tags/ai>Ai</a></li><li><a href=/tags/android>Android</a></li><li><a href=/tags/cka>Cka</a></li><li><a href=/tags/company>Company</a></li><li><a href=/tags/gitalk>Gitalk</a></li><li><a href=/tags/golang>Golang</a></li><li><a href=/tags/k8s>K8s</a></li><li><a href=/tags/mechine>Mechine</a></li><li><a href=/tags/news>News</a></li><li><a href=/tags/retro>Retro</a></li><li><a href=/tags/selinux>Selinux</a></li><li><a href=/tags/technology>Technology</a></li><li><a href=/tags/%e7%9b%91%e6%8e%a7>监控</a></li></ul></div></aside></div></div></div></section><footer class=footer><div class=container><div class=row><div class=col-md-12><div class=footer-manu><ul></ul></div><p class=copyright>Copyright © 2020-2025 <a href=https://shenhonglei.com>申红磊</a> All Rights Reserved</p></div></div></div></footer><script src=https://shenhonglei.com/plugins/jQuery/jquery.min.js></script><script src=https://shenhonglei.com/plugins/bootstrap/bootstrap.min.js></script><script src=https://shenhonglei.com/plugins/slick/slick.min.js></script><script src=https://shenhonglei.com/plugins/magnific-popup/jquery.magnific-popup.min.js></script><script src=https://shenhonglei.com/plugins/shuffle/shuffle.min.js></script><script src=https://shenhonglei.com/plugins/google-map/gmap.js></script><script src=https://shenhonglei.com/js/script.min.js></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','UA-181030130-1','auto');ga('send','pageview');</script></body></html>